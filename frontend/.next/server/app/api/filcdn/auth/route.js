/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/filcdn/auth/route";
exports.ids = ["app/api/filcdn/auth/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?fbb2":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?33bc":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffilcdn%2Fauth%2Froute&page=%2Fapi%2Ffilcdn%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffilcdn%2Fauth%2Froute.ts&appDir=%2FUsers%2Fudingethe%2FDev%2Fmegavibe%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fudingethe%2FDev%2Fmegavibe%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffilcdn%2Fauth%2Froute&page=%2Fapi%2Ffilcdn%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffilcdn%2Fauth%2Froute.ts&appDir=%2FUsers%2Fudingethe%2FDev%2Fmegavibe%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fudingethe%2FDev%2Fmegavibe%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_udingethe_Dev_megavibe_frontend_src_app_api_filcdn_auth_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/filcdn/auth/route.ts */ \"(rsc)/./src/app/api/filcdn/auth/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/filcdn/auth/route\",\n        pathname: \"/api/filcdn/auth\",\n        filename: \"route\",\n        bundlePath: \"app/api/filcdn/auth/route\"\n    },\n    resolvedPagePath: \"/Users/udingethe/Dev/megavibe/frontend/src/app/api/filcdn/auth/route.ts\",\n    nextConfigOutput,\n    userland: _Users_udingethe_Dev_megavibe_frontend_src_app_api_filcdn_auth_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/filcdn/auth/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZmaWxjZG4lMkZhdXRoJTJGcm91dGUmcGFnZT0lMkZhcGklMkZmaWxjZG4lMkZhdXRoJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZmlsY2RuJTJGYXV0aCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnVkaW5nZXRoZSUyRkRldiUyRm1lZ2F2aWJlJTJGZnJvbnRlbmQlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdWRpbmdldGhlJTJGRGV2JTJGbWVnYXZpYmUlMkZmcm9udGVuZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1QjtBQUNwRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL21lZ2F2aWJlLWZyb250ZW5kLz9mNzM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy91ZGluZ2V0aGUvRGV2L21lZ2F2aWJlL2Zyb250ZW5kL3NyYy9hcHAvYXBpL2ZpbGNkbi9hdXRoL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9maWxjZG4vYXV0aC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ZpbGNkbi9hdXRoXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9maWxjZG4vYXV0aC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy91ZGluZ2V0aGUvRGV2L21lZ2F2aWJlL2Zyb250ZW5kL3NyYy9hcHAvYXBpL2ZpbGNkbi9hdXRoL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2ZpbGNkbi9hdXRoL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffilcdn%2Fauth%2Froute&page=%2Fapi%2Ffilcdn%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffilcdn%2Fauth%2Froute.ts&appDir=%2FUsers%2Fudingethe%2FDev%2Fmegavibe%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fudingethe%2FDev%2Fmegavibe%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/filcdn/auth/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/filcdn/auth/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _services_filcdn_realFilcdnService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/filcdn/realFilcdnService */ \"(rsc)/./src/services/filcdn/realFilcdnService.ts\");\n\n\n// Initialize FilCDN service with private key from server environment\nconst filcdnService = (0,_services_filcdn_realFilcdnService__WEBPACK_IMPORTED_MODULE_1__.createRealFilCDNService)({\n    privateKey: process.env.FILCDN_PRIVATE_KEY || process.env.FILECOIN_PRIVATE_KEY || process.env.PRIVATE_KEY,\n    rpcURL: \"https://api.calibration.node.glif.io/rpc/v1\" || 0,\n    withCDN: true\n});\n// Track initialization state\nlet isInitialized = false;\nlet initError = null;\nlet initializationPromise = null;\n// Initialize the service\nasync function ensureInitialized() {\n    if (isInitialized) return;\n    if (!initializationPromise) {\n        initializationPromise = (async ()=>{\n            try {\n                await filcdnService.initialize();\n                isInitialized = true;\n                initError = null;\n            } catch (err) {\n                console.error(\"Failed to initialize FilCDN service:\", err);\n                initError = err.message;\n                throw err;\n            }\n        })();\n    }\n    await initializationPromise;\n}\nasync function GET() {\n    try {\n        await ensureInitialized();\n        // Get service stats\n        const stats = await filcdnService.getStats();\n        // Return status and authentication token for client\n        // Note: We don't return any sensitive information\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            status: \"authenticated\",\n            initialized: isInitialized,\n            stats: {\n                network: stats.network,\n                withCDN: stats.withCDN,\n                proofSetId: stats.proofSetId,\n                lastUpdated: stats.lastUpdated\n            }\n        });\n    } catch (err) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            status: \"error\",\n            message: `FilCDN initialization failed: ${err.message}`,\n            initialized: false\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9maWxjZG4vYXV0aC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0Q7QUFDc0I7QUFFOUUscUVBQXFFO0FBQ3JFLE1BQU1FLGdCQUFnQkQsMkZBQXVCQSxDQUFDO0lBQzVDRSxZQUFZQyxRQUFRQyxHQUFHLENBQUNDLGtCQUFrQixJQUFJRixRQUFRQyxHQUFHLENBQUNFLG9CQUFvQixJQUFJSCxRQUFRQyxHQUFHLENBQUNHLFdBQVc7SUFDekdDLFFBQVFMLDZDQUF3QyxJQUFJLENBQTZDO0lBQ2pHTyxTQUFTO0FBQ1g7QUFFQSw2QkFBNkI7QUFDN0IsSUFBSUMsZ0JBQWdCO0FBQ3BCLElBQUlDLFlBQTJCO0FBQy9CLElBQUlDLHdCQUE4QztBQUVsRCx5QkFBeUI7QUFDekIsZUFBZUM7SUFDYixJQUFJSCxlQUFlO0lBRW5CLElBQUksQ0FBQ0UsdUJBQXVCO1FBQzFCQSx3QkFBd0IsQ0FBQztZQUN2QixJQUFJO2dCQUNGLE1BQU1aLGNBQWNjLFVBQVU7Z0JBQzlCSixnQkFBZ0I7Z0JBQ2hCQyxZQUFZO1lBQ2QsRUFBRSxPQUFPSSxLQUFVO2dCQUNqQkMsUUFBUUMsS0FBSyxDQUFDLHdDQUF3Q0Y7Z0JBQ3RESixZQUFZSSxJQUFJRyxPQUFPO2dCQUN2QixNQUFNSDtZQUNSO1FBQ0Y7SUFDRjtJQUVBLE1BQU1IO0FBQ1I7QUFFTyxlQUFlTztJQUNwQixJQUFJO1FBQ0YsTUFBTU47UUFFTixvQkFBb0I7UUFDcEIsTUFBTU8sUUFBUSxNQUFNcEIsY0FBY3FCLFFBQVE7UUFFMUMsb0RBQW9EO1FBQ3BELGtEQUFrRDtRQUNsRCxPQUFPdkIsa0ZBQVlBLENBQUN3QixJQUFJLENBQUM7WUFDdkJDLFFBQVE7WUFDUkMsYUFBYWQ7WUFDYlUsT0FBTztnQkFDTEssU0FBU0wsTUFBTUssT0FBTztnQkFDdEJoQixTQUFTVyxNQUFNWCxPQUFPO2dCQUN0QmlCLFlBQVlOLE1BQU1NLFVBQVU7Z0JBQzVCQyxhQUFhUCxNQUFNTyxXQUFXO1lBQ2hDO1FBQ0Y7SUFDRixFQUFFLE9BQU9aLEtBQVU7UUFDakIsT0FBT2pCLGtGQUFZQSxDQUFDd0IsSUFBSSxDQUN0QjtZQUNFQyxRQUFRO1lBQ1JMLFNBQVMsQ0FBQyw4QkFBOEIsRUFBRUgsSUFBSUcsT0FBTyxDQUFDLENBQUM7WUFDdkRNLGFBQWE7UUFDZixHQUNBO1lBQUVELFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVnYXZpYmUtZnJvbnRlbmQvLi9zcmMvYXBwL2FwaS9maWxjZG4vYXV0aC9yb3V0ZS50cz9iYTUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGNyZWF0ZVJlYWxGaWxDRE5TZXJ2aWNlIH0gZnJvbSBcIkAvc2VydmljZXMvZmlsY2RuL3JlYWxGaWxjZG5TZXJ2aWNlXCI7XG5cbi8vIEluaXRpYWxpemUgRmlsQ0ROIHNlcnZpY2Ugd2l0aCBwcml2YXRlIGtleSBmcm9tIHNlcnZlciBlbnZpcm9ubWVudFxuY29uc3QgZmlsY2RuU2VydmljZSA9IGNyZWF0ZVJlYWxGaWxDRE5TZXJ2aWNlKHtcbiAgcHJpdmF0ZUtleTogcHJvY2Vzcy5lbnYuRklMQ0ROX1BSSVZBVEVfS0VZIHx8IHByb2Nlc3MuZW52LkZJTEVDT0lOX1BSSVZBVEVfS0VZIHx8IHByb2Nlc3MuZW52LlBSSVZBVEVfS0VZLFxuICBycGNVUkw6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJTEVDT0lOX1JQQ19VUkwgfHwgXCJodHRwczovL2FwaS5jYWxpYnJhdGlvbi5ub2RlLmdsaWYuaW8vcnBjL3YxXCIsXG4gIHdpdGhDRE46IHRydWVcbn0pO1xuXG4vLyBUcmFjayBpbml0aWFsaXphdGlvbiBzdGF0ZVxubGV0IGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbmxldCBpbml0RXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xubGV0IGluaXRpYWxpemF0aW9uUHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IG51bGwgPSBudWxsO1xuXG4vLyBJbml0aWFsaXplIHRoZSBzZXJ2aWNlXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVJbml0aWFsaXplZCgpIHtcbiAgaWYgKGlzSW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgXG4gIGlmICghaW5pdGlhbGl6YXRpb25Qcm9taXNlKSB7XG4gICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGZpbGNkblNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBpc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgaW5pdEVycm9yID0gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBGaWxDRE4gc2VydmljZTpcIiwgZXJyKTtcbiAgICAgICAgaW5pdEVycm9yID0gZXJyLm1lc3NhZ2U7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9KSgpO1xuICB9XG4gIFxuICBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICBcbiAgICAvLyBHZXQgc2VydmljZSBzdGF0c1xuICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZmlsY2RuU2VydmljZS5nZXRTdGF0cygpO1xuICAgIFxuICAgIC8vIFJldHVybiBzdGF0dXMgYW5kIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciBjbGllbnRcbiAgICAvLyBOb3RlOiBXZSBkb24ndCByZXR1cm4gYW55IHNlbnNpdGl2ZSBpbmZvcm1hdGlvblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdGF0dXM6IFwiYXV0aGVudGljYXRlZFwiLFxuICAgICAgaW5pdGlhbGl6ZWQ6IGlzSW5pdGlhbGl6ZWQsXG4gICAgICBzdGF0czoge1xuICAgICAgICBuZXR3b3JrOiBzdGF0cy5uZXR3b3JrLFxuICAgICAgICB3aXRoQ0ROOiBzdGF0cy53aXRoQ0ROLFxuICAgICAgICBwcm9vZlNldElkOiBzdGF0cy5wcm9vZlNldElkLFxuICAgICAgICBsYXN0VXBkYXRlZDogc3RhdHMubGFzdFVwZGF0ZWRcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIiwgXG4gICAgICAgIG1lc3NhZ2U6IGBGaWxDRE4gaW5pdGlhbGl6YXRpb24gZmFpbGVkOiAke2Vyci5tZXNzYWdlfWAsXG4gICAgICAgIGluaXRpYWxpemVkOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlUmVhbEZpbENETlNlcnZpY2UiLCJmaWxjZG5TZXJ2aWNlIiwicHJpdmF0ZUtleSIsInByb2Nlc3MiLCJlbnYiLCJGSUxDRE5fUFJJVkFURV9LRVkiLCJGSUxFQ09JTl9QUklWQVRFX0tFWSIsIlBSSVZBVEVfS0VZIiwicnBjVVJMIiwiTkVYVF9QVUJMSUNfRklMRUNPSU5fUlBDX1VSTCIsIndpdGhDRE4iLCJpc0luaXRpYWxpemVkIiwiaW5pdEVycm9yIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiZW5zdXJlSW5pdGlhbGl6ZWQiLCJpbml0aWFsaXplIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsIkdFVCIsInN0YXRzIiwiZ2V0U3RhdHMiLCJqc29uIiwic3RhdHVzIiwiaW5pdGlhbGl6ZWQiLCJuZXR3b3JrIiwicHJvb2ZTZXRJZCIsImxhc3RVcGRhdGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/filcdn/auth/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/filcdn/realFilcdnService.ts":
/*!**************************************************!*\
  !*** ./src/services/filcdn/realFilcdnService.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RealFilCDNService: () => (/* binding */ RealFilCDNService),\n/* harmony export */   createRealFilCDNService: () => (/* binding */ createRealFilCDNService)\n/* harmony export */ });\n/* harmony import */ var _filoz_synapse_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @filoz/synapse-sdk */ \"(rsc)/../node_modules/@filoz/synapse-sdk/dist/index.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethers */ \"(rsc)/./node_modules/ethers/lib.esm/utils/units.js\");\n/**\n * Real FilCDN Service\n * Properly implements FilCDN integration using the Synapse SDK\n */ \n\n// Constants\nconst PROOF_SET_CREATION_FEE = ethers__WEBPACK_IMPORTED_MODULE_1__.parseUnits(\"5\", 18); // 5 USDFC for proof set\nconst BUFFER_AMOUNT = ethers__WEBPACK_IMPORTED_MODULE_1__.parseUnits(\"5\", 18); // 5 USDFC buffer for gas fees\n/**\n * Real FilCDN Service class\n * Provides functionality for interacting with FilCDN via Synapse SDK\n */ class RealFilCDNService {\n    constructor(config = {}){\n        this.config = config;\n        this.synapse = null;\n        this.storage = null;\n        this.initialized = false;\n        this.initializing = false;\n        this.providerInfo = null;\n        this.proofSetId = null;\n        this.stats = {};\n    }\n    /**\n   * Performs preflight checks to ensure sufficient USDFC balance and allowances\n   * @param dataSize Size of data to be stored\n   * @param withProofset Whether a new proofset needs to be created\n   */ async performPreflightCheck(dataSize, withProofset) {\n        if (!this.synapse) {\n            throw new Error(\"Synapse not initialized\");\n        }\n        const network = this.synapse.getNetwork();\n        const pandoraAddress = _filoz_synapse_sdk__WEBPACK_IMPORTED_MODULE_0__.CONTRACT_ADDRESSES.PANDORA_SERVICE[network];\n        const signer = this.synapse.getSigner();\n        if (!signer || !signer.provider) {\n            throw new Error(\"Provider not found\");\n        }\n        // Initialize Pandora service for allowance checks\n        const pandoraService = new _filoz_synapse_sdk__WEBPACK_IMPORTED_MODULE_0__.PandoraService(signer.provider, pandoraAddress);\n        // Check if current allowance is sufficient\n        const preflight = await pandoraService.checkAllowanceForStorage(dataSize, this.config.withCDN || false, this.synapse.payments);\n        // If allowance is insufficient, handle deposit and approval\n        if (!preflight.sufficient) {\n            // Calculate total allowance needed including proofset creation fee if required\n            const proofSetCreationFee = withProofset ? PROOF_SET_CREATION_FEE : BigInt(0);\n            const allowanceNeeded = preflight.lockupAllowanceNeeded + proofSetCreationFee + BUFFER_AMOUNT;\n            console.log(\"Setting up USDFC payments:\");\n            console.log(\"- Base allowance:\", ethers__WEBPACK_IMPORTED_MODULE_1__.formatUnits(preflight.lockupAllowanceNeeded, 18), \"USDFC\");\n            if (withProofset) {\n                console.log(\"- Proof set fee:\", ethers__WEBPACK_IMPORTED_MODULE_1__.formatUnits(PROOF_SET_CREATION_FEE, 18), \"USDFC\");\n            }\n            console.log(\"- Buffer amount:\", ethers__WEBPACK_IMPORTED_MODULE_1__.formatUnits(BUFFER_AMOUNT, 18), \"USDFC\");\n            console.log(\"- Total needed:\", ethers__WEBPACK_IMPORTED_MODULE_1__.formatUnits(allowanceNeeded, 18), \"USDFC\");\n            // Step 1: Deposit USDFC to cover storage costs\n            console.log(\"Depositing USDFC...\");\n            await this.synapse.payments.deposit(allowanceNeeded);\n            console.log(\"USDFC deposited successfully\");\n            // Step 2: Approve Pandora service to spend USDFC at specified rates\n            console.log(\"Approving Pandora service...\");\n            await this.synapse.payments.approveService(pandoraAddress, preflight.rateAllowanceNeeded, allowanceNeeded);\n            console.log(\"Pandora service approved successfully\");\n        } else {\n            console.log(\"✓ Sufficient USDFC allowance already available\");\n        }\n    }\n    /**\n   * Initialize the FilCDN service with Synapse SDK\n   */ async initialize() {\n        if (this.initialized) return;\n        if (this.initializing) {\n            // Wait for initialization to complete\n            let retries = 0;\n            while(this.initializing && retries < 30){\n                await new Promise((resolve)=>setTimeout(resolve, 500));\n                retries++;\n            }\n            if (this.initialized) return;\n            throw new Error(\"Initialization timed out\");\n        }\n        this.initializing = true;\n        try {\n            console.log(\"Initializing FilCDN service with Synapse SDK\");\n            // Initialize Synapse SDK\n            this.synapse = await _filoz_synapse_sdk__WEBPACK_IMPORTED_MODULE_0__.Synapse.create({\n                privateKey: this.config.privateKey || \"\",\n                rpcURL: this.config.rpcURL || _filoz_synapse_sdk__WEBPACK_IMPORTED_MODULE_0__.RPC_URLS.calibration.websocket,\n                withCDN: this.config.withCDN\n            });\n            // Perform initial preflight check with minimum size for proof set creation\n            await this.performPreflightCheck(1024, true); // 1KB minimum size\n            // Create storage service with callbacks\n            this.storage = await this.synapse.createStorage({\n                callbacks: {\n                    onProviderSelected: (provider)=>{\n                        console.log(`✓ Selected storage provider: ${provider.owner}`);\n                        console.log(`  PDP URL: ${provider.pdpUrl}`);\n                        this.providerInfo = {\n                            owner: provider.owner,\n                            pdpUrl: provider.pdpUrl,\n                            speed: 0 // Will be updated later\n                        };\n                    },\n                    onProofSetResolved: (info)=>{\n                        if (info.isExisting) {\n                            console.log(`✓ Using existing proof set: ${info.proofSetId}`);\n                        } else {\n                            console.log(`✓ Created new proof set: ${info.proofSetId}`);\n                        }\n                        this.proofSetId = info.proofSetId;\n                    },\n                    onProofSetCreationStarted: (transaction, statusUrl)=>{\n                        console.log(`  Creating proof set, tx: ${transaction.hash}`);\n                    },\n                    onProofSetCreationProgress: (progress)=>{\n                        if (progress.transactionMined && !progress.proofSetLive) {\n                            console.log(\"  Transaction mined, waiting for proof set to be live...\");\n                        }\n                    }\n                }\n            });\n            // Update stats\n            this.stats = {\n                network: this.synapse.getNetwork(),\n                provider: this.providerInfo,\n                proofSetId: this.proofSetId,\n                withCDN: this.config.withCDN,\n                initialized: true,\n                lastUpdated: Date.now()\n            };\n            this.initialized = true;\n            console.log(\"✅ FilCDN service initialized successfully\");\n        } catch (error) {\n            const message = error instanceof Error ? error.message : \"Unknown error\";\n            console.error(\"❌ FilCDN service initialization failed:\", error);\n            throw new Error(`Failed to initialize FilCDN service: ${message}`);\n        } finally{\n            this.initializing = false;\n        }\n    }\n    /**\n   * Store data on FilCDN\n   * @param data Data to store\n   * @returns Storage result\n   */ async storeData(data) {\n        if (!this.initialized || !this.storage) {\n            await this.initialize();\n        }\n        try {\n            console.log(\"Storing data on FilCDN\");\n            // Convert data to Uint8Array for storage\n            let dataToStore;\n            if (data instanceof Uint8Array) {\n                dataToStore = data;\n            } else if (typeof data === \"string\") {\n                dataToStore = new TextEncoder().encode(data);\n            } else {\n                dataToStore = new TextEncoder().encode(JSON.stringify(data));\n            }\n            // Perform preflight check before upload\n            await this.performPreflightCheck(dataToStore.length, false);\n            // Upload data to FilCDN\n            const result = await this.storage.upload(dataToStore);\n            // Get CDN URL\n            const url = await this.getCDNUrl(result.commp.toString());\n            // Return storage result\n            return {\n                cid: result.commp.toString(),\n                size: dataToStore.length,\n                url,\n                timestamp: Date.now()\n            };\n        } catch (error) {\n            const message = error instanceof Error ? error.message : \"Unknown error\";\n            console.error(\"❌ FilCDN storage failed:\", error);\n            throw new Error(`Failed to store data on FilCDN: ${message}`);\n        }\n    }\n    /**\n   * Retrieve data from FilCDN\n   * @param cid Content identifier\n   * @returns Retrieval result\n   */ async retrieveData(cid) {\n        if (!this.initialized || !this.storage) {\n            await this.initialize();\n        }\n        try {\n            console.log(`Retrieving data from FilCDN for CID: ${cid}`);\n            // Download data from FilCDN\n            const startTime = Date.now();\n            const data = await this.storage.providerDownload(cid);\n            const endTime = Date.now();\n            // Update provider speed stats if available\n            if (this.providerInfo) {\n                this.providerInfo.speed = Math.round(data.length / (endTime - startTime) * 1000); // bytes per second\n            }\n            // Determine MIME type based on data\n            let result;\n            let mimeType = \"application/octet-stream\";\n            try {\n                // Try to parse as JSON\n                const textData = new TextDecoder().decode(data);\n                result = JSON.parse(textData);\n                mimeType = \"application/json\";\n            } catch (e) {\n                // Not JSON, return as-is\n                result = data;\n            }\n            // Return retrieval result\n            return {\n                data: result,\n                mimeType\n            };\n        } catch (error) {\n            const message = error instanceof Error ? error.message : \"Unknown error\";\n            console.error(\"❌ FilCDN retrieval failed:\", error);\n            throw new Error(`Failed to retrieve data from FilCDN: ${message}`);\n        }\n    }\n    /**\n   * Get CDN URL for a content identifier\n   * @param cid Content identifier\n   * @returns CDN URL\n   */ async getCDNUrl(cid) {\n        if (!cid) {\n            throw new Error(\"CID is required\");\n        }\n        // If this.config.withCDN is true, use the CDN URL format\n        if (this.config.withCDN) {\n            // Get the provider's PDP URL if available\n            if (this.providerInfo && this.providerInfo.pdpUrl) {\n                return `${this.providerInfo.pdpUrl}/ipfs/${cid}`;\n            }\n            // Fall back to FilCDN gateway\n            return `https://gateway.filcdn.io/ipfs/${cid}`;\n        }\n        // Fall back to IPFS gateway\n        return `https://ipfs.io/ipfs/${cid}`;\n    }\n    /**\n   * Get statistics about the FilCDN service\n   * @returns Service statistics\n   */ async getStats() {\n        // Update timestamp\n        this.stats.lastUpdated = Date.now();\n        // Add balance information if available\n        if (this.synapse && this.synapse.payments) {\n            try {\n                const balance = await this.synapse.payments.balance();\n                this.stats.balance = ethers__WEBPACK_IMPORTED_MODULE_1__.formatUnits(balance, 18);\n            } catch (e) {\n                console.warn(\"Could not get balance information\", e);\n            }\n        }\n        return this.stats;\n    }\n    /**\n   * Verify that a CID exists and is retrievable\n   * @param cid Content identifier to verify\n   * @returns Whether the content is available\n   */ async verifyCid(cid) {\n        if (!this.initialized || !this.storage) {\n            await this.initialize();\n        }\n        try {\n            // Try to download but only verify availability\n            await this.storage.providerDownload(cid, {\n                onlyVerify: true\n            });\n            return true;\n        } catch (error) {\n            console.warn(`Content verification failed for CID: ${cid}`, error);\n            return false;\n        }\n    }\n}\n/**\n * Create a new FilCDN service instance\n * @param config Service configuration\n * @returns FilCDN service instance\n */ function createRealFilCDNService(config = {}) {\n    return new RealFilCDNService(config);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvZmlsY2RuL3JlYWxGaWxjZG5TZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FFa0g7QUFDbkY7QUFFaEMsWUFBWTtBQUNaLE1BQU1LLHlCQUF5QkQsOENBQWlCLENBQUMsS0FBSyxLQUFLLHdCQUF3QjtBQUNuRixNQUFNRyxnQkFBZ0JILDhDQUFpQixDQUFDLEtBQUssS0FBSyw4QkFBOEI7QUErQmhGOzs7Q0FHQyxHQUNNLE1BQU1JO0lBU1hDLFlBQVksU0FBK0IsQ0FBQyxDQUFDLENBQUU7YUFBM0JDLFNBQUFBO2FBUlpDLFVBQTBCO2FBQzFCQyxVQUFpQzthQUNqQ0MsY0FBdUI7YUFDdkJDLGVBQXdCO2FBQ3hCQyxlQUFvQzthQUNwQ0MsYUFBNEI7YUFDNUJDLFFBQWEsQ0FBQztJQUUwQjtJQUVoRDs7OztHQUlDLEdBQ0QsTUFBY0Msc0JBQXNCQyxRQUFnQixFQUFFQyxZQUFxQixFQUFpQjtRQUMxRixJQUFJLENBQUMsSUFBSSxDQUFDVCxPQUFPLEVBQUU7WUFDakIsTUFBTSxJQUFJVSxNQUFNO1FBQ2xCO1FBRUEsTUFBTUMsVUFBVSxJQUFJLENBQUNYLE9BQU8sQ0FBQ1ksVUFBVTtRQUN2QyxNQUFNQyxpQkFBaUJ0QixrRUFBa0JBLENBQUN1QixlQUFlLENBQUNILFFBQVE7UUFFbEUsTUFBTUksU0FBUyxJQUFJLENBQUNmLE9BQU8sQ0FBQ2dCLFNBQVM7UUFDckMsSUFBSSxDQUFDRCxVQUFVLENBQUNBLE9BQU9FLFFBQVEsRUFBRTtZQUMvQixNQUFNLElBQUlQLE1BQU07UUFDbEI7UUFFQSxrREFBa0Q7UUFDbEQsTUFBTVEsaUJBQWlCLElBQUkxQiw4REFBY0EsQ0FDdkN1QixPQUFPRSxRQUFRLEVBQ2ZKO1FBR0YsMkNBQTJDO1FBQzNDLE1BQU1NLFlBQVksTUFBTUQsZUFBZUUsd0JBQXdCLENBQzdEWixVQUNBLElBQUksQ0FBQ1QsTUFBTSxDQUFDc0IsT0FBTyxJQUFJLE9BQ3ZCLElBQUks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SUFBSSxDQUFDL0UsV0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDRCxPQUFPLEVBQUU7WUFDdEMsTUFBTSxJQUFJLENBQUNpQyxVQUFVO1FBQ3ZCO1FBRUEsSUFBSTtZQUNGLCtDQUErQztZQUMvQyxNQUFNLElBQUksQ0FBQ2pDLE9BQU8sQ0FBRXFGLGdCQUFnQixDQUFDTCxLQUFLO2dCQUFFbUIsWUFBWTtZQUFLO1lBQzdELE9BQU87UUFDVCxFQUFFLE9BQU9wQyxPQUFPO1lBQ2RwQyxRQUFRc0UsSUFBSSxDQUFDLENBQUMscUNBQXFDLEVBQUVqQixJQUFJLENBQUMsRUFBRWpCO1lBQzVELE9BQU87UUFDVDtJQUNGO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sU0FBU3FDLHdCQUF3QnRHLFNBQXVCLENBQUMsQ0FBQztJQUMvRCxPQUFPLElBQUlGLGtCQUFrQkU7QUFDL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWdhdmliZS1mcm9udGVuZC8uL3NyYy9zZXJ2aWNlcy9maWxjZG4vcmVhbEZpbGNkblNlcnZpY2UudHM/OGJkMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJlYWwgRmlsQ0ROIFNlcnZpY2VcbiAqIFByb3Blcmx5IGltcGxlbWVudHMgRmlsQ0ROIGludGVncmF0aW9uIHVzaW5nIHRoZSBTeW5hcHNlIFNES1xuICovXG5cbmltcG9ydCB7IFN5bmFwc2UsIFJQQ19VUkxTLCBTdG9yYWdlU2VydmljZSwgVE9LRU5TLCBDT05UUkFDVF9BRERSRVNTRVMsIFBhbmRvcmFTZXJ2aWNlIH0gZnJvbSAnQGZpbG96L3N5bmFwc2Utc2RrJztcbmltcG9ydCB7IGV0aGVycyB9IGZyb20gJ2V0aGVycyc7XG5cbi8vIENvbnN0YW50c1xuY29uc3QgUFJPT0ZfU0VUX0NSRUFUSU9OX0ZFRSA9IGV0aGVycy5wYXJzZVVuaXRzKCc1JywgMTgpOyAvLyA1IFVTREZDIGZvciBwcm9vZiBzZXRcbmNvbnN0IEJVRkZFUl9BTU9VTlQgPSBldGhlcnMucGFyc2VVbml0cygnNScsIDE4KTsgLy8gNSBVU0RGQyBidWZmZXIgZm9yIGdhcyBmZWVzXG5cbi8vIFNlcnZpY2UgY29uZmlndXJhdGlvbiBpbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgRmlsQ0ROQ29uZmlnIHtcbiAgcHJpdmF0ZUtleT86IHN0cmluZztcbiAgcnBjVVJMPzogc3RyaW5nO1xuICBhdXRob3JpemF0aW9uPzogc3RyaW5nOyAvLyBGb3IgQVBJIGtleSBhdXRoZW50aWNhdGlvblxuICB3aXRoQ0ROPzogYm9vbGVhbjtcbn1cblxuLy8gU3RvcmFnZSByZXN1bHQgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JhZ2VSZXN1bHQge1xuICBjaWQ6IHN0cmluZztcbiAgc2l6ZTogbnVtYmVyO1xuICB1cmw6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG59XG5cbi8vIFJldHJpZXZhbCByZXN1bHQgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIFJldHJpZXZhbFJlc3VsdCB7XG4gIGRhdGE6IGFueTtcbiAgbWltZVR5cGU6IHN0cmluZztcbn1cblxuLy8gUHJvdmlkZXIgaW5mb3JtYXRpb24gaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVySW5mbyB7XG4gIG93bmVyOiBzdHJpbmc7XG4gIHBkcFVybDogc3RyaW5nO1xuICBzcGVlZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIFJlYWwgRmlsQ0ROIFNlcnZpY2UgY2xhc3NcbiAqIFByb3ZpZGVzIGZ1bmN0aW9uYWxpdHkgZm9yIGludGVyYWN0aW5nIHdpdGggRmlsQ0ROIHZpYSBTeW5hcHNlIFNES1xuICovXG5leHBvcnQgY2xhc3MgUmVhbEZpbENETlNlcnZpY2Uge1xuICBwcml2YXRlIHN5bmFwc2U6IFN5bmFwc2UgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdG9yYWdlOiBTdG9yYWdlU2VydmljZSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGluaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgaW5pdGlhbGl6aW5nOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgcHJvdmlkZXJJbmZvOiBQcm92aWRlckluZm8gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwcm9vZlNldElkOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0czogYW55ID0ge307XG4gIFxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbmZpZzogRmlsQ0ROQ29uZmlnID0ge30pIHt9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIHByZWZsaWdodCBjaGVja3MgdG8gZW5zdXJlIHN1ZmZpY2llbnQgVVNERkMgYmFsYW5jZSBhbmQgYWxsb3dhbmNlc1xuICAgKiBAcGFyYW0gZGF0YVNpemUgU2l6ZSBvZiBkYXRhIHRvIGJlIHN0b3JlZFxuICAgKiBAcGFyYW0gd2l0aFByb29mc2V0IFdoZXRoZXIgYSBuZXcgcHJvb2ZzZXQgbmVlZHMgdG8gYmUgY3JlYXRlZFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJmb3JtUHJlZmxpZ2h0Q2hlY2soZGF0YVNpemU6IG51bWJlciwgd2l0aFByb29mc2V0OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnN5bmFwc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmFwc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBuZXR3b3JrID0gdGhpcy5zeW5hcHNlLmdldE5ldHdvcmsoKTtcbiAgICBjb25zdCBwYW5kb3JhQWRkcmVzcyA9IENPTlRSQUNUX0FERFJFU1NFUy5QQU5ET1JBX1NFUlZJQ0VbbmV0d29ya107XG4gICAgXG4gICAgY29uc3Qgc2lnbmVyID0gdGhpcy5zeW5hcHNlLmdldFNpZ25lcigpO1xuICAgIGlmICghc2lnbmVyIHx8ICFzaWduZXIucHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3ZpZGVyIG5vdCBmb3VuZFwiKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBQYW5kb3JhIHNlcnZpY2UgZm9yIGFsbG93YW5jZSBjaGVja3NcbiAgICBjb25zdCBwYW5kb3JhU2VydmljZSA9IG5ldyBQYW5kb3JhU2VydmljZShcbiAgICAgIHNpZ25lci5wcm92aWRlcixcbiAgICAgIHBhbmRvcmFBZGRyZXNzXG4gICAgKTtcblxuICAgIC8vIENoZWNrIGlmIGN1cnJlbnQgYWxsb3dhbmNlIGlzIHN1ZmZpY2llbnRcbiAgICBjb25zdCBwcmVmbGlnaHQgPSBhd2FpdCBwYW5kb3JhU2VydmljZS5jaGVja0FsbG93YW5jZUZvclN0b3JhZ2UoXG4gICAgICBkYXRhU2l6ZSxcbiAgICAgIHRoaXMuY29uZmlnLndpdGhDRE4gfHwgZmFsc2UsXG4gICAgICB0aGlzLnN5bmFwc2UucGF5bWVudHNcbiAgICApO1xuXG4gICAgLy8gSWYgYWxsb3dhbmNlIGlzIGluc3VmZmljaWVudCwgaGFuZGxlIGRlcG9zaXQgYW5kIGFwcHJvdmFsXG4gICAgaWYgKCFwcmVmbGlnaHQuc3VmZmljaWVudCkge1xuICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIGFsbG93YW5jZSBuZWVkZWQgaW5jbHVkaW5nIHByb29mc2V0IGNyZWF0aW9uIGZlZSBpZiByZXF1aXJlZFxuICAgICAgY29uc3QgcHJvb2ZTZXRDcmVhdGlvbkZlZSA9IHdpdGhQcm9vZnNldCA/IFBST09GX1NFVF9DUkVBVElPTl9GRUUgOiBCaWdJbnQoMCk7XG4gICAgICBjb25zdCBhbGxvd2FuY2VOZWVkZWQgPSBwcmVmbGlnaHQubG9ja3VwQWxsb3dhbmNlTmVlZGVkICsgcHJvb2ZTZXRDcmVhdGlvbkZlZSArIEJVRkZFUl9BTU9VTlQ7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIHVwIFVTREZDIHBheW1lbnRzOicpO1xuICAgICAgY29uc29sZS5sb2coJy0gQmFzZSBhbGxvd2FuY2U6JywgZXRoZXJzLmZvcm1hdFVuaXRzKHByZWZsaWdodC5sb2NrdXBBbGxvd2FuY2VOZWVkZWQsIDE4KSwgJ1VTREZDJyk7XG4gICAgICBpZiAod2l0aFByb29mc2V0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCctIFByb29mIHNldCBmZWU6JywgZXRoZXJzLmZvcm1hdFVuaXRzKFBST09GX1NFVF9DUkVBVElPTl9GRUUsIDE4KSwgJ1VTREZDJyk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZygnLSBCdWZmZXIgYW1vdW50OicsIGV0aGVycy5mb3JtYXRVbml0cyhCVUZGRVJfQU1PVU5ULCAxOCksICdVU0RGQycpO1xuICAgICAgY29uc29sZS5sb2coJy0gVG90YWwgbmVlZGVkOicsIGV0aGVycy5mb3JtYXRVbml0cyhhbGxvd2FuY2VOZWVkZWQsIDE4KSwgJ1VTREZDJyk7XG5cbiAgICAgIC8vIFN0ZXAgMTogRGVwb3NpdCBVU0RGQyB0byBjb3ZlciBzdG9yYWdlIGNvc3RzXG4gICAgICBjb25zb2xlLmxvZygnRGVwb3NpdGluZyBVU0RGQy4uLicpO1xuICAgICAgYXdhaXQgdGhpcy5zeW5hcHNlLnBheW1lbnRzLmRlcG9zaXQoYWxsb3dhbmNlTmVlZGVkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdVU0RGQyBkZXBvc2l0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICAgIC8vIFN0ZXAgMjogQXBwcm92ZSBQYW5kb3JhIHNlcnZpY2UgdG8gc3BlbmQgVVNERkMgYXQgc3BlY2lmaWVkIHJhdGVzXG4gICAgICBjb25zb2xlLmxvZygnQXBwcm92aW5nIFBhbmRvcmEgc2VydmljZS4uLicpO1xuICAgICAgYXdhaXQgdGhpcy5zeW5hcHNlLnBheW1lbnRzLmFwcHJvdmVTZXJ2aWNlKFxuICAgICAgICBwYW5kb3JhQWRkcmVzcyxcbiAgICAgICAgcHJlZmxpZ2h0LnJhdGVBbGxvd2FuY2VOZWVkZWQsXG4gICAgICAgIGFsbG93YW5jZU5lZWRlZFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKCdQYW5kb3JhIHNlcnZpY2UgYXBwcm92ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinJMgU3VmZmljaWVudCBVU0RGQyBhbGxvd2FuY2UgYWxyZWFkeSBhdmFpbGFibGUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgRmlsQ0ROIHNlcnZpY2Ugd2l0aCBTeW5hcHNlIFNES1xuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLmluaXRpYWxpemluZykge1xuICAgICAgLy8gV2FpdCBmb3IgaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGVcbiAgICAgIGxldCByZXRyaWVzID0gMDtcbiAgICAgIHdoaWxlICh0aGlzLmluaXRpYWxpemluZyAmJiByZXRyaWVzIDwgMzApIHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICByZXRyaWVzKys7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkgcmV0dXJuO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5pdGlhbGl6YXRpb24gdGltZWQgb3V0XCIpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmluaXRpYWxpemluZyA9IHRydWU7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIEZpbENETiBzZXJ2aWNlIHdpdGggU3luYXBzZSBTREtcIik7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgU3luYXBzZSBTREtcbiAgICAgIHRoaXMuc3luYXBzZSA9IGF3YWl0IFN5bmFwc2UuY3JlYXRlKHtcbiAgICAgICAgcHJpdmF0ZUtleTogdGhpcy5jb25maWcucHJpdmF0ZUtleSB8fCBcIlwiLFxuICAgICAgICBycGNVUkw6IHRoaXMuY29uZmlnLnJwY1VSTCB8fCBSUENfVVJMUy5jYWxpYnJhdGlvbi53ZWJzb2NrZXQsXG4gICAgICAgIHdpdGhDRE46IHRoaXMuY29uZmlnLndpdGhDRE5cbiAgICAgIH0pO1xuXG4gICAgICAvLyBQZXJmb3JtIGluaXRpYWwgcHJlZmxpZ2h0IGNoZWNrIHdpdGggbWluaW11bSBzaXplIGZvciBwcm9vZiBzZXQgY3JlYXRpb25cbiAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVByZWZsaWdodENoZWNrKDEwMjQsIHRydWUpOyAvLyAxS0IgbWluaW11bSBzaXplXG5cbiAgICAgIC8vIENyZWF0ZSBzdG9yYWdlIHNlcnZpY2Ugd2l0aCBjYWxsYmFja3NcbiAgICAgIHRoaXMuc3RvcmFnZSA9IGF3YWl0IHRoaXMuc3luYXBzZS5jcmVhdGVTdG9yYWdlKHtcbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgb25Qcm92aWRlclNlbGVjdGVkOiAocHJvdmlkZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinJMgU2VsZWN0ZWQgc3RvcmFnZSBwcm92aWRlcjogJHtwcm92aWRlci5vd25lcn1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFBEUCBVUkw6ICR7cHJvdmlkZXIucGRwVXJsfWApO1xuICAgICAgICAgICAgdGhpcy5wcm92aWRlckluZm8gPSB7XG4gICAgICAgICAgICAgIG93bmVyOiBwcm92aWRlci5vd25lcixcbiAgICAgICAgICAgICAgcGRwVXJsOiBwcm92aWRlci5wZHBVcmwsXG4gICAgICAgICAgICAgIHNwZWVkOiAwIC8vIFdpbGwgYmUgdXBkYXRlZCBsYXRlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uUHJvb2ZTZXRSZXNvbHZlZDogKGluZm8pID0+IHtcbiAgICAgICAgICAgIGlmIChpbmZvLmlzRXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKckyBVc2luZyBleGlzdGluZyBwcm9vZiBzZXQ6ICR7aW5mby5wcm9vZlNldElkfWApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKckyBDcmVhdGVkIG5ldyBwcm9vZiBzZXQ6ICR7aW5mby5wcm9vZlNldElkfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9vZlNldElkID0gaW5mby5wcm9vZlNldElkO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Qcm9vZlNldENyZWF0aW9uU3RhcnRlZDogKHRyYW5zYWN0aW9uLCBzdGF0dXNVcmwpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIENyZWF0aW5nIHByb29mIHNldCwgdHg6ICR7dHJhbnNhY3Rpb24uaGFzaH1gKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uUHJvb2ZTZXRDcmVhdGlvblByb2dyZXNzOiAocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcy50cmFuc2FjdGlvbk1pbmVkICYmICFwcm9ncmVzcy5wcm9vZlNldExpdmUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJyAgVHJhbnNhY3Rpb24gbWluZWQsIHdhaXRpbmcgZm9yIHByb29mIHNldCB0byBiZSBsaXZlLi4uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgc3RhdHNcbiAgICAgIHRoaXMuc3RhdHMgPSB7XG4gICAgICAgIG5ldHdvcms6IHRoaXMuc3luYXBzZS5nZXROZXR3b3JrKCksXG4gICAgICAgIHByb3ZpZGVyOiB0aGlzLnByb3ZpZGVySW5mbyxcbiAgICAgICAgcHJvb2ZTZXRJZDogdGhpcy5wcm9vZlNldElkLFxuICAgICAgICB3aXRoQ0ROOiB0aGlzLmNvbmZpZy53aXRoQ0ROLFxuICAgICAgICBpbml0aWFsaXplZDogdHJ1ZSxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IERhdGUubm93KClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coXCLinIUgRmlsQ0ROIHNlcnZpY2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmlsQ0ROIHNlcnZpY2UgaW5pdGlhbGl6YXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGluaXRpYWxpemUgRmlsQ0ROIHNlcnZpY2U6ICR7bWVzc2FnZX1gKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pbml0aWFsaXppbmcgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcmUgZGF0YSBvbiBGaWxDRE5cbiAgICogQHBhcmFtIGRhdGEgRGF0YSB0byBzdG9yZVxuICAgKiBAcmV0dXJucyBTdG9yYWdlIHJlc3VsdFxuICAgKi9cbiAgYXN5bmMgc3RvcmVEYXRhKGRhdGE6IGFueSk6IFByb21pc2U8U3RvcmFnZVJlc3VsdD4ge1xuICAgIGlmICghdGhpcy5pbml0aWFsaXplZCB8fCAhdGhpcy5zdG9yYWdlKSB7XG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiU3RvcmluZyBkYXRhIG9uIEZpbENETlwiKTtcbiAgICAgIFxuICAgICAgLy8gQ29udmVydCBkYXRhIHRvIFVpbnQ4QXJyYXkgZm9yIHN0b3JhZ2VcbiAgICAgIGxldCBkYXRhVG9TdG9yZTogVWludDhBcnJheTtcbiAgICAgIFxuICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIGRhdGFUb1N0b3JlID0gZGF0YTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRhdGFUb1N0b3JlID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YVRvU3RvcmUgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQZXJmb3JtIHByZWZsaWdodCBjaGVjayBiZWZvcmUgdXBsb2FkXG4gICAgICBhd2FpdCB0aGlzLnBlcmZvcm1QcmVmbGlnaHRDaGVjayhkYXRhVG9TdG9yZS5sZW5ndGgsIGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gVXBsb2FkIGRhdGEgdG8gRmlsQ0ROXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN0b3JhZ2UhLnVwbG9hZChkYXRhVG9TdG9yZSk7XG4gICAgICBcbiAgICAgIC8vIEdldCBDRE4gVVJMXG4gICAgICBjb25zdCB1cmwgPSBhd2FpdCB0aGlzLmdldENETlVybChyZXN1bHQuY29tbXAudG9TdHJpbmcoKSk7XG4gICAgICBcbiAgICAgIC8vIFJldHVybiBzdG9yYWdlIHJlc3VsdFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2lkOiByZXN1bHQuY29tbXAudG9TdHJpbmcoKSxcbiAgICAgICAgc2l6ZTogZGF0YVRvU3RvcmUubGVuZ3RoLFxuICAgICAgICB1cmwsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZpbENETiBzdG9yYWdlIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzdG9yZSBkYXRhIG9uIEZpbENETjogJHttZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBkYXRhIGZyb20gRmlsQ0ROXG4gICAqIEBwYXJhbSBjaWQgQ29udGVudCBpZGVudGlmaWVyXG4gICAqIEByZXR1cm5zIFJldHJpZXZhbCByZXN1bHRcbiAgICovXG4gIGFzeW5jIHJldHJpZXZlRGF0YShjaWQ6IHN0cmluZyk6IFByb21pc2U8UmV0cmlldmFsUmVzdWx0PiB7XG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkIHx8ICF0aGlzLnN0b3JhZ2UpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYFJldHJpZXZpbmcgZGF0YSBmcm9tIEZpbENETiBmb3IgQ0lEOiAke2NpZH1gKTtcbiAgICAgIFxuICAgICAgLy8gRG93bmxvYWQgZGF0YSBmcm9tIEZpbENETlxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnN0b3JhZ2UhLnByb3ZpZGVyRG93bmxvYWQoY2lkKTtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgcHJvdmlkZXIgc3BlZWQgc3RhdHMgaWYgYXZhaWxhYmxlXG4gICAgICBpZiAodGhpcy5wcm92aWRlckluZm8pIHtcbiAgICAgICAgdGhpcy5wcm92aWRlckluZm8uc3BlZWQgPSBNYXRoLnJvdW5kKGRhdGEubGVuZ3RoIC8gKGVuZFRpbWUgLSBzdGFydFRpbWUpICogMTAwMCk7IC8vIGJ5dGVzIHBlciBzZWNvbmRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRGV0ZXJtaW5lIE1JTUUgdHlwZSBiYXNlZCBvbiBkYXRhXG4gICAgICBsZXQgcmVzdWx0OiBhbnk7XG4gICAgICBsZXQgbWltZVR5cGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVHJ5IHRvIHBhcnNlIGFzIEpTT05cbiAgICAgICAgY29uc3QgdGV4dERhdGEgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSk7XG4gICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UodGV4dERhdGEpO1xuICAgICAgICBtaW1lVHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gTm90IEpTT04sIHJldHVybiBhcy1pc1xuICAgICAgICByZXN1bHQgPSBkYXRhO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXR1cm4gcmV0cmlldmFsIHJlc3VsdFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBtaW1lVHlwZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZpbENETiByZXRyaWV2YWwgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJldHJpZXZlIGRhdGEgZnJvbSBGaWxDRE46ICR7bWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IENETiBVUkwgZm9yIGEgY29udGVudCBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSBjaWQgQ29udGVudCBpZGVudGlmaWVyXG4gICAqIEByZXR1cm5zIENETiBVUkxcbiAgICovXG4gIGFzeW5jIGdldENETlVybChjaWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKCFjaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNJRCBpcyByZXF1aXJlZFwiKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgdGhpcy5jb25maWcud2l0aENETiBpcyB0cnVlLCB1c2UgdGhlIENETiBVUkwgZm9ybWF0XG4gICAgaWYgKHRoaXMuY29uZmlnLndpdGhDRE4pIHtcbiAgICAgIC8vIEdldCB0aGUgcHJvdmlkZXIncyBQRFAgVVJMIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKHRoaXMucHJvdmlkZXJJbmZvICYmIHRoaXMucHJvdmlkZXJJbmZvLnBkcFVybCkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5wcm92aWRlckluZm8ucGRwVXJsfS9pcGZzLyR7Y2lkfWA7XG4gICAgICB9XG4gICAgICAvLyBGYWxsIGJhY2sgdG8gRmlsQ0ROIGdhdGV3YXlcbiAgICAgIHJldHVybiBgaHR0cHM6Ly9nYXRld2F5LmZpbGNkbi5pby9pcGZzLyR7Y2lkfWA7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGwgYmFjayB0byBJUEZTIGdhdGV3YXlcbiAgICByZXR1cm4gYGh0dHBzOi8vaXBmcy5pby9pcGZzLyR7Y2lkfWA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN0YXRpc3RpY3MgYWJvdXQgdGhlIEZpbENETiBzZXJ2aWNlXG4gICAqIEByZXR1cm5zIFNlcnZpY2Ugc3RhdGlzdGljc1xuICAgKi9cbiAgYXN5bmMgZ2V0U3RhdHMoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyBVcGRhdGUgdGltZXN0YW1wXG4gICAgdGhpcy5zdGF0cy5sYXN0VXBkYXRlZCA9IERhdGUubm93KCk7XG4gICAgXG4gICAgLy8gQWRkIGJhbGFuY2UgaW5mb3JtYXRpb24gaWYgYXZhaWxhYmxlXG4gICAgaWYgKHRoaXMuc3luYXBzZSAmJiB0aGlzLnN5bmFwc2UucGF5bWVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLnN5bmFwc2UucGF5bWVudHMuYmFsYW5jZSgpO1xuICAgICAgICB0aGlzLnN0YXRzLmJhbGFuY2UgPSBldGhlcnMuZm9ybWF0VW5pdHMoYmFsYW5jZSwgMTgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgZ2V0IGJhbGFuY2UgaW5mb3JtYXRpb25cIiwgZSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLnN0YXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmeSB0aGF0IGEgQ0lEIGV4aXN0cyBhbmQgaXMgcmV0cmlldmFibGVcbiAgICogQHBhcmFtIGNpZCBDb250ZW50IGlkZW50aWZpZXIgdG8gdmVyaWZ5XG4gICAqIEByZXR1cm5zIFdoZXRoZXIgdGhlIGNvbnRlbnQgaXMgYXZhaWxhYmxlXG4gICAqL1xuICBhc3luYyB2ZXJpZnlDaWQoY2lkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQgfHwgIXRoaXMuc3RvcmFnZSkge1xuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgdG8gZG93bmxvYWQgYnV0IG9ubHkgdmVyaWZ5IGF2YWlsYWJpbGl0eVxuICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlIS5wcm92aWRlckRvd25sb2FkKGNpZCwgeyBvbmx5VmVyaWZ5OiB0cnVlIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ29udGVudCB2ZXJpZmljYXRpb24gZmFpbGVkIGZvciBDSUQ6ICR7Y2lkfWAsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgRmlsQ0ROIHNlcnZpY2UgaW5zdGFuY2VcbiAqIEBwYXJhbSBjb25maWcgU2VydmljZSBjb25maWd1cmF0aW9uXG4gKiBAcmV0dXJucyBGaWxDRE4gc2VydmljZSBpbnN0YW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVhbEZpbENETlNlcnZpY2UoY29uZmlnOiBGaWxDRE5Db25maWcgPSB7fSk6IFJlYWxGaWxDRE5TZXJ2aWNlIHtcbiAgcmV0dXJuIG5ldyBSZWFsRmlsQ0ROU2VydmljZShjb25maWcpO1xufSJdLCJuYW1lcyI6WyJTeW5hcHNlIiwiUlBDX1VSTFMiLCJDT05UUkFDVF9BRERSRVNTRVMiLCJQYW5kb3JhU2VydmljZSIsImV0aGVycyIsIlBST09GX1NFVF9DUkVBVElPTl9GRUUiLCJwYXJzZVVuaXRzIiwiQlVGRkVSX0FNT1VOVCIsIlJlYWxGaWxDRE5TZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJzeW5hcHNlIiwic3RvcmFnZSIsImluaXRpYWxpemVkIiwiaW5pdGlhbGl6aW5nIiwicHJvdmlkZXJJbmZvIiwicHJvb2ZTZXRJZCIsInN0YXRzIiwicGVyZm9ybVByZWZsaWdodENoZWNrIiwiZGF0YVNpemUiLCJ3aXRoUHJvb2ZzZXQiLCJFcnJvciIsIm5ldHdvcmsiLCJnZXROZXR3b3JrIiwicGFuZG9yYUFkZHJlc3MiLCJQQU5ET1JBX1NFUlZJQ0UiLCJzaWduZXIiLCJnZXRTaWduZXIiLCJwcm92aWRlciIsInBhbmRvcmFTZXJ2aWNlIiwicHJlZmxpZ2h0IiwiY2hlY2tBbGxvd2FuY2VGb3JTdG9yYWdlIiwid2l0aENETiIsInBheW1lbnRzIiwic3VmZmljaWVudCIsInByb29mU2V0Q3JlYXRpb25GZWUiLCJCaWdJbnQiLCJhbGxvd2FuY2VOZWVkZWQiLCJsb2NrdXBBbGxvd2FuY2VOZWVkZWQiLCJjb25zb2xlIiwibG9nIiwiZm9ybWF0VW5pdHMiLCJkZXBvc2l0IiwiYXBwcm92ZVNlcnZpY2UiLCJyYXRlQWxsb3dhbmNlTmVlZGVkIiwiaW5pdGlhbGl6ZSIsInJldHJpZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJjcmVhdGUiLCJwcml2YXRlS2V5IiwicnBjVVJMIiwiY2FsaWJyYXRpb24iLCJ3ZWJzb2NrZXQiLCJjcmVhdGVTdG9yYWdlIiwiY2FsbGJhY2tzIiwib25Qcm92aWRlclNlbGVjdGVkIiwib3duZXIiLCJwZHBVcmwiLCJzcGVlZCIsIm9uUHJvb2ZTZXRSZXNvbHZlZCIsImluZm8iLCJpc0V4aXN0aW5nIiwib25Qcm9vZlNldENyZWF0aW9uU3RhcnRlZCIsInRyYW5zYWN0aW9uIiwic3RhdHVzVXJsIiwiaGFzaCIsIm9uUHJvb2ZTZXRDcmVhdGlvblByb2dyZXNzIiwicHJvZ3Jlc3MiLCJ0cmFuc2FjdGlvbk1pbmVkIiwicHJvb2ZTZXRMaXZlIiwibGFzdFVwZGF0ZWQiLCJEYXRlIiwibm93IiwiZXJyb3IiLCJtZXNzYWdlIiwic3RvcmVEYXRhIiwiZGF0YSIsImRhdGFUb1N0b3JlIiwiVWludDhBcnJheSIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwiSlNPTiIsInN0cmluZ2lmeSIsImxlbmd0aCIsInJlc3VsdCIsInVwbG9hZCIsInVybCIsImdldENETlVybCIsImNvbW1wIiwidG9TdHJpbmciLCJjaWQiLCJzaXplIiwidGltZXN0YW1wIiwicmV0cmlldmVEYXRhIiwic3RhcnRUaW1lIiwicHJvdmlkZXJEb3dubG9hZCIsImVuZFRpbWUiLCJNYXRoIiwicm91bmQiLCJtaW1lVHlwZSIsInRleHREYXRhIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJwYXJzZSIsImUiLCJnZXRTdGF0cyIsImJhbGFuY2UiLCJ3YXJuIiwidmVyaWZ5Q2lkIiwib25seVZlcmlmeSIsImNyZWF0ZVJlYWxGaWxDRE5TZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/filcdn/realFilcdnService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/ethers","vendor-chunks/@noble","vendor-chunks/@filoz","vendor-chunks/cborg","vendor-chunks/@web3-storage","vendor-chunks/aes-js","vendor-chunks/multiformats","vendor-chunks/@ipld","vendor-chunks/sync-multihash-sha2"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffilcdn%2Fauth%2Froute&page=%2Fapi%2Ffilcdn%2Fauth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffilcdn%2Fauth%2Froute.ts&appDir=%2FUsers%2Fudingethe%2FDev%2Fmegavibe%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fudingethe%2FDev%2Fmegavibe%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();